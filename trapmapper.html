<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>Deep Dungeon Trap Mapper</title>
<style type="text/css">@import "style.css";</style>
<script type="module" src="trapmapper.js"></script>
</head>

<body>
  <div id="container">
    <div id="help" class="helpbox hidden">
      <p>Mouse controls:</p>
      <table class="keylist">
        <tr><th>Left click</th><td>: Add new trap/hoard location</td></tr>
        <tr><th>Middle click</th><td>: View/edit trap details or remove trap</td></tr>
        <tr><th>Left button drag</th><td>: Move trap to new position</td></tr>
        <tr><th>Middle button drag</th><td>: Scroll map</td></tr>
        <tr><th>Scroll wheel up/down</th><td>: Zoom in/out</td></tr>
      </table>
      <p>Key controls:</p>
      <table class="keylist">
        <tr><th>Shift+B</th><td>: Create new ("B"lank) map</td></tr>
        <tr><th>Shift+L</th><td>: Load map file</td></tr>
        <tr><th>Shift+M</th><td>: Set map background image</td></tr>
        <tr><th>Shift+P</th><td>: Export ("P"rint) map as PNG</td></tr>
        <tr><th>Shift+R</th><td>: Edit room locations in background image</td></tr>
        <tr><th>Shift+S</th><td>: Save map file</td></tr>
        <tr><th>#</th><td>: Toggle trap index numbers on or off</td></tr>
        <tr><th>?</th><td>: Display this help text</td></tr>
      </table>
      <p><span style="color: rgb(255,64,64); font-weight: bold;">BEWARE:</span>
          There is no undo and no unsaved data warnings!</p>
    </div>

    <div id="popup_image" class="imagebox hidden">
      <img id="popup_image_img" src="" alt=""/>
    </div>

    <div id="edit" class="editbox hidden">
      <div class="imagelist"><div id="edit_image1" class="imageholder"><img id="edit_image1_img" src="" alt=""/><div id="edit_image1_delete" class="deletebutton">X</div></div><div id="edit_image2" class="imageholder"><img id="edit_image2_img" src="" alt=""/><div id="edit_image2_delete" class="deletebutton">X</div></div><div id="edit_image3" class="imageholder"><img id="edit_image3_img" src="" alt=""/><div id="edit_image3_delete" class="deletebutton">X</div></div><div id="edit_image_add_holder" class="buttonholder"><div id="edit_image_add" class="button">Add trap image</div></div></div>
      <div class="imagelist"><div id="edit_hoard" class="imageholder"><img id="edit_hoard_img" src="" alt=""/><div id="edit_hoard_delete" class="deletebutton">X</div></div><div id="edit_hoard_add_holder" class="buttonholder"><div id="edit_hoard_add" class="button">Add hoard image</div></div></div>
      <div class="buttonrow">
        <select id="edit_index">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
        </select>
        <div class="buttonspacer"></div>
	<div class="buttonholder"><div id="edit_color1" class="colorbutton color1"></div></div>
	<div class="buttonholder"><div id="edit_color2" class="colorbutton color2"></div></div>
	<div class="buttonholder"><div id="edit_color3" class="colorbutton color3"></div></div>
	<div class="buttonholder"><div id="edit_color4" class="colorbutton color4"></div></div>
	<div class="buttonholder"><div id="edit_color5" class="colorbutton color5"></div></div>
        <div class="buttonspacer"></div>
	<div class="buttonholder"><input id="edit_wall" type="checkbox"/><span class="checklabel">Wall trap</span></div>
        <div class="buttonspacer"></div>
        <div class="buttonholder"><div id="edit_delete" class="button red">Delete trap</div></div>
      </div>
    </div>
  </div>

  <!-- Hidden elements used by script -->
  <div id="hidden" style="display: none;">
    <img id="blank_map" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAEAAAAAgAAQAAAACO6csTAAAEEUlEQVR42u3BMQEAAADCoPVPbQZ/oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+AwjwAAF0/hkbAAAAAElFTkSuQmCC"/>
    <input id="fs_load" type="file" accept=".json"/>
    <a id="fs_save" download/>
    <input id="img_load" type="file" accept="image/png,image/jpeg"/>
  </div>
</body>
</html>
